import{r as i,a7 as q,l as L,p as A,ao as E,_ as G,j as e,t as M}from"./index-JNa5NbPl.js";import{S as U,F as z,a as D}from"./index-bWX895IO.js";import{u as R,C as f}from"./index.esm-CpjHtoQ6.js";import{c as y}from"./clsx-B-dksMZM.js";const Q=()=>{const[d,o]=i.useState([]),[u,c]=i.useState(null),[x,N]=i.useState(!1),{data:g}=q(),h=L(),{data:s}=A(h.id),[v,{error:I,isLoading:w,isSuccess:p}]=E(),{register:n,handleSubmit:P,reset:b,control:j,setValue:t}=R();i.useEffect(()=>{t("name",s&&s.product.name),t("price",s&&s.product.price),t("description",s&&s.product.description),t("discountPercentage",s&&s.product.discountPercentage),t("newArrival",s==null?void 0:s.product.newArrival),t("stock",s==null?void 0:s.product.stock),t("category",s==null?void 0:s.product.category)},[s,t]),i.useEffect(()=>{const r=[];d&&d.forEach(a=>{r.push(a)}),t("images",r)},[d,t]),i.useEffect(()=>{p&&G.success("Product Updated")},[p]);const k=r=>{const a=r.target.files[0];if(a){const l=new FileReader;l.onloadend=()=>{c(l.result),t("thumbnail",l.result)},l.readAsDataURL(a)}else c(null)},C=r=>{const a=Array.from(r.target.files);o([]),a.forEach(l=>{const m=new FileReader;m.onload=()=>{m.readyState===2&&o(S=>[...S,m.result])},m.readAsDataURL(l)})},F=r=>{const a={product:r,id:h.id};v(a),b(),o([]),c(null)};return e.jsxs("div",{id:"editProduct",className:"flex bg-gray-100",children:[e.jsx(U,{}),e.jsx("div",{id:"toggleBtn",className:" md:hidden z-50 absolute right-5 top-5 w-10 h-10 rounded-full text-white flex items-center justify-center bg-green-500",onClick:()=>N(!x),children:e.jsx(z,{className:"text-xl"})}),e.jsx(D,{isOpen:x}),w?e.jsx(M,{}):e.jsx(e.Fragment,{children:!x&&e.jsx("div",{className:"w-screen px-2 py-10",children:e.jsxs("form",{noValidate:!0,onSubmit:P(r=>{F(r),b(),o([]),c(null)}),className:"relative border  border-gray-100 space-y-3 w-full mx-auto rounded-md bg-white p-6 shadow-xl lg:p-10",children:[e.jsx("h1",{className:"mb-6 text-xl font-semibold lg:text-2xl",children:"Create New Product"}),e.jsxs("div",{children:[e.jsx("label",{className:"",children:" Name "}),e.jsx("input",{type:"text",placeholder:"Product Name",id:"name",className:"mt-2  focus:border-none focus:ring-green-500 h-12 w-full rounded-md bg-gray-100 px-3 border-gray-300",...n("name",{required:"name is required"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"",children:" Description "}),e.jsx("textarea",{placeholder:"Product Description",id:"description",...n("description",{required:"description is required"}),className:"mt-2 h-32 w-full rounded-md focus:border-none focus:ring-green-500 bg-gray-100 px-3 border-gray-300 resize-none"})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"",children:" Category "}),e.jsx("select",{id:"category",...n("category",{required:"category is required"}),className:"mt-2 h-12 flex w-full rounded-md focus:border-none focus:ring-green-500 select-none border p-2 px-3 bg-gray-100 border-gray-300 text-gray-700 ring-green-400 ",children:g==null?void 0:g.categories.map(r=>e.jsx("option",{value:r.value,children:r.label}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"",children:" Price (in Rupee) "}),e.jsx("input",{type:"number",placeholder:"Price",id:"price",...n("price",{required:"price is required"}),className:"mt-2 h-12 w-full rounded-md focus:border-none focus:ring-green-500 bg-gray-100 px-3 border-gray-300"})]})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"",children:" Discount Percentage "}),e.jsx("input",{type:"tel",maxLength:2,placeholder:"Discount Percentage",className:"mt-2 h-12 w-full rounded-md focus:border-none focus:ring-green-500 bg-gray-100 px-3 border-gray-300",id:"discountPercentage",...n("discountPercentage",{required:"discount is required"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"",children:" Stock "}),e.jsx("input",{type:"number",id:"stock",placeholder:"Stock",...n("stock",{required:"stock is required"}),className:"mt-2 h-12 w-full rounded-md focus:border-none focus:ring-green-500 bg-gray-100 px-3 border-gray-300"})]})]}),e.jsxs("div",{className:"main-col",children:[e.jsx("div",{className:"select",children:e.jsx(f,{control:j,name:"thumbnail",render:({field:r})=>e.jsx("div",{className:"file",children:e.jsxs("div",{id:"image-preview",className:y("max-w-lg p-6 mb-4 bg-gray-100  rounded-lg items-center mx-auto text-center cursor-pointer",!u&&"border-dashed border-2 border-gray-400"),children:[e.jsx("input",{id:"upload",type:"file",className:"hidden",name:"thumbnail",accept:"image/*",onChange:a=>{r.onChange(a),k(a)}}),e.jsx("label",{htmlFor:"upload",className:"cursor-pointer",children:u?e.jsx("img",{src:u,className:"max-h-48 rounded-lg mx-auto"}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 h-8 text-gray-700 mx-auto mb-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),e.jsx("h5",{className:"mb-2 text-xl font-bold tracking-tight text-gray-700",children:"Upload Thumbnail"}),e.jsxs("p",{className:"font-normal text-sm text-gray-400 md:px-6",children:["Choose photo size should be less than"," ",e.jsx("b",{className:"text-gray-600",children:"2mb"})]}),e.jsxs("p",{className:"font-normal text-sm text-gray-400 md:px-6",children:["and should be in"," ",e.jsx("b",{className:"text-gray-600",children:"JPG, PNG, or GIF"})," ","format."]}),e.jsx("span",{id:"filename",className:"text-gray-500 bg-gray-200 z-50"})]})})]})})})}),e.jsx("div",{className:"select",children:e.jsx(f,{control:j,name:"images",render:({field:r})=>e.jsx("div",{className:"file",children:e.jsxs("div",{id:"image-preview",className:y("max-w-lg overflow-auto p-6 mb-4 bg-gray-100  rounded-lg items-center mx-auto text-center cursor-pointer",d.length===0&&"border-dashed border-2 border-gray-400"),children:[e.jsx("input",{id:"images",accept:"image/*",type:"file",name:"images",className:"hidden",multiple:!0,onChange:a=>{r.onChange(a),C(a)}}),e.jsxs("label",{htmlFor:"images",className:"cursor-pointer",children:[e.jsx("div",{className:"flex",children:d.map((a,l)=>e.jsx("img",{className:"max-h-48 rounded-lg mx-auto",src:a,alt:"avatar"},l))}),d.length===0&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 h-8 text-gray-700 mx-auto mb-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),e.jsx("h5",{className:"mb-2 text-xl font-bold tracking-tight text-gray-700",children:"Upload Images (Multiple)"}),e.jsxs("p",{className:"font-normal text-sm text-gray-400 md:px-6",children:["Choose photo size should be less than"," ",e.jsx("b",{className:"text-gray-600",children:"2mb"})]}),e.jsxs("p",{className:"font-normal text-sm text-gray-400 md:px-6",children:["and should be in"," ",e.jsx("b",{className:"text-gray-600",children:"JPG, PNG, or GIF"})," ","format."]}),e.jsx("span",{id:"filename",className:"text-gray-500 bg-gray-200 z-50"})]})]})]})})})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"mt-5 w-full rounded-md bg-green-600 p-2 text-center font-semibold text-white",children:"Update"})})]})})})]})};export{Q as default};
