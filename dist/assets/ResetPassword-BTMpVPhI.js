import{r as d,l as y,ab as b,_ as v,j as s,t as N,y as P,L as k}from"./index-JNa5NbPl.js";import{u as E}from"./index.esm-CpjHtoQ6.js";import{I as c,a as m}from"./index-mWjD0jpP.js";const F=()=>{const[t,x]=d.useState({password1:!1,password2:!1}),{token:u}=y(),{register:l,handleSubmit:g,setValue:o,formState:{errors:r}}=E(),[f,{error:w,isError:p,isLoading:h,isSuccess:i}]=b(),n=e=>{x(a=>({...a,[e]:!a[e]}))};d.useEffect(()=>{i&&v.success("Password reset successfully")},[i]);const j=async e=>{await f({token:u,...e}),o("password1",""),o("password2","")};return s.jsx(s.Fragment,{children:h?s.jsx(N,{}):s.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[s.jsxs("h1",{className:"mt-10 text-center text-3xl font-bold leading-9 tracking-tight text-gray-900 flex items-center justify-center gap-5",children:[s.jsx("div",{className:"rounded-full h-10 w-10 overflow-hidden",children:s.jsx("img",{src:P})}),"TechyDeals"]}),s.jsx("h2",{className:"mt-10 text-center text-lg leading-9 tracking-tight text-gray-900",children:"Reset your password"})]}),s.jsxs("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[s.jsxs("form",{className:"space-y-6",onSubmit:g(j),children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),s.jsxs("div",{className:"mt-2 relative",children:[s.jsx("input",{id:"password",name:"password",type:t.password1?"text":"password",...l("password",{required:"password is required",pattern:{value:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm,message:"at least 8 characters, must contain uppercase letter, lowercase letter, number and special characters"}}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-green-600 sm:text-sm sm:leading-6"}),s.jsx("div",{className:"absolute top-0 right-0 h-full w-10 flex items-center justify-center",onClick:()=>n("password1"),children:t.password1?s.jsx(c,{}):s.jsx(m,{})})]}),r.password&&s.jsx("p",{className:"text-red-500",children:r.password.message})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Confirm Password"})}),s.jsxs("div",{className:"mt-2 relative",children:[s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:t.password2?"text":"password",...l("confirmPassword",{required:"confirmPassword is required",validate:(e,a)=>e===a.password||"Passwords don't match"}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-green-600 sm:text-sm sm:leading-6"}),s.jsx("div",{className:"absolute top-0 right-0 h-full w-10 flex items-center justify-center",onClick:()=>n("password2"),children:t.password2?s.jsx(c,{}):s.jsx(m,{})})]}),r.confirmPassword&&s.jsx("p",{className:"text-red-500",children:r.confirmPassword.message})]}),p&&s.jsx("div",{className:"bg-red-200 text-red-600 py-1.5 px-2 rounded",children:w.data.message}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-green-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Submit"})})]}),i&&s.jsxs("p",{className:"mt-10 text-center text-sm text-gray-500",children:["Go back to?"," ",s.jsx(k,{to:"/login",className:"font-semibold leading-6 text-green-600 hover:text-green-500",children:"Login"})]})]})]})})};export{F as default};
