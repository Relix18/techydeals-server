import{ah as A,aq as L,r as a,j as e,L as y,ak as B,al as E,q as i,m as c}from"./index-j_GBgB9-.js";import{S as _,F as q,a as Q}from"./index-lh5n64ah.js";import{r as x}from"./index-DsL187nd.js";import{c as d}from"./clsx-B-dksMZM.js";import{f as R}from"./format-CE4V3joc.js";const K=()=>{const{data:r}=A(),[j]=L(),[m,h]=a.useState(null),[g,N]=a.useState(!1),[w,l]=a.useState(!1),[p,v]=a.useState(""),C=a.useMemo(()=>(r==null?void 0:r.orders)||[],[r]),S=a.useMemo(()=>[{Header:"OrderId",accessor:"orderId"},{Header:"Name",accessor:"shippingInfo.name"},{Header:"Status",accessor:"orderStatus",Cell:({value:t})=>e.jsxs("span",{className:d("",t==="Processing"&&"text-blue-400",t==="Delivered"&&"text-green-500",t==="Shipped"&&"text-yellow-500",t==="Canceled"&&"text-red-500"),children:[console.log(t),t]})},{Header:"Item Qty",accessor:"totalItems"},{Header:"Amount",accessor:"total",Cell:({value:t})=>`₹${t}`},{Header:"Action",accessor:"action",Cell:({row:t})=>e.jsxs("div",{className:"flex",children:[e.jsx(y,{to:`/admin/order/${t.original._id}`,children:e.jsx(B,{className:"m-1 h-6 w-6 hover:text-green-600 hover:cursor-pointer"})}),e.jsx(E,{className:"m-1 h-6 w-6 hover:text-green-600 hover:cursor-pointer",onClick:()=>u(t.original._id)})]})}],[]),u=t=>{h(t),l(!0)},P=()=>{m&&(j(m),l(!1),h(null))},{getTableProps:I,getTableBodyProps:O,headerGroups:k,page:F,previousPage:D,nextPage:M,canNextPage:o,canPreviousPage:n,state:{pageIndex:T},pageCount:f,gotoPage:b,prepareRow:H}=x.useTable({columns:S,data:C},x.useSortBy,x.usePagination);return e.jsxs(e.Fragment,{children:[e.jsx(i,{appear:!0,show:w,as:a.Fragment,children:e.jsxs(c,{as:"div",className:"relative z-10",onClose:()=>l(!1),children:[e.jsx(i.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(i.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(c.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(c.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Are you sure you want to delete this order?"}),e.jsxs("div",{className:"mt-4 flex w-full justify-center gap-4",children:[e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none ",onClick:()=>P(),children:"Yes"}),e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent  px-4 py-2 text-sm font-medium text-gray-900 bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2",onClick:()=>l(!1),children:"No"})]})]})})})})]})}),r&&e.jsxs("div",{id:"orders",className:"flex bg-gray-100 h-screen",children:[e.jsx(_,{}),e.jsx("div",{id:"toggleBtn",className:" md:hidden z-50 absolute right-5 top-5 w-10 h-10 rounded-full text-white flex items-center justify-center bg-green-500",onClick:()=>N(!g),children:e.jsx(q,{className:"text-xl"})}),e.jsx(Q,{isOpen:g}),e.jsxs("div",{className:"w-screen bg-gray-100",children:[e.jsx("div",{className:"mx-auto max-w-screen-xl px-2 py-10",children:e.jsxs("div",{className:"mt-2 overflow-hidden rounded-xl bg-white px-6 shadow lg:px-4",children:[e.jsx("div",{className:"mt-4 mb-2 space-y-3",children:e.jsx("h1",{className:" text-3xl font-bold text-gray-700",children:"All Orders"})}),e.jsx("div",{className:"border-b md:hidden"}),e.jsx("input",{type:"text",placeholder:"Search by OrderId",id:"name",onChange:t=>v(t.target.value),className:"mt-4 hidden md:flex focus:border-none focus:ring-green-500 h-12 w-full rounded-md bg-gray-100 px-3 border-gray-300"}),e.jsxs("table",{className:"min-w-full border-collapse border-spacing-y-2 border-spacing-x-2",...I(),children:[e.jsx("thead",{className:"hidden border-b md:table-header-group",children:k.map(t=>e.jsx("tr",{...t.getHeaderGroupProps(),children:t.headers.map(s=>e.jsx("td",{className:"whitespace-normal py-4 text-sm font-semibold text-gray-800 sm:px-3",...s.getHeaderProps(s.getSortByToggleProps()),children:s.render("Header")},s.id))},t.id))}),e.jsxs("tbody",{...O(),className:"bg-white lg:border-gray-300",children:[F.filter(t=>p.toLowerCase()===""?t:t.original.orderId.toLowerCase().includes(p.toLowerCase())).map(t=>(console.log(t.original.name),H(t),e.jsx("tr",{className:"",...t.getRowProps(),children:t.cells.map(s=>e.jsx("td",{...s.getCellProps(),className:"whitespace-no-wrap hidden py-4 text-left text-sm text-gray-600 sm:px-3 lg:text-left md:table-cell",children:s.render("Cell")},s.id))},t.id))),r==null?void 0:r.orders.map((t,s)=>e.jsxs("tr",{className:"mobile",children:[console.log(t),e.jsx("td",{className:"whitespace-no-wrap py-4 text-left text-sm text-gray-600 sm:px-3 lg:text-left",children:e.jsxs("div",{className:"mt-1 flex flex-col text-xs font-medium md:hidden",children:[e.jsx("div",{className:"flex items-center",children:R(new Date(t.createdAt),"dd/MMMM/yyyy")}),e.jsxs("div",{className:"flex items-center",children:["Id: ",t.orderId]}),e.jsxs("div",{className:"",children:["Name: ",t.shippingInfo.name]}),e.jsxs("div",{className:"",children:["Qty: ",t.totalItems]}),e.jsxs("div",{className:"",children:["Price: ₹",t.total]}),e.jsxs("div",{className:d("",t.orderStatus==="Processing"&&"text-blue-400",t.orderStatus==="Delivered"&&"text-green-500",t.orderStatus==="Shipped"&&"text-yellow-500",t.orderStatus==="Canceled"&&"text-red-500"),children:["Status: ",t.orderStatus]})]})}),e.jsxs("td",{className:"whitespace-no-wrap w-32 text-right text-sm text-gray-600 sm:px-3 lg:text-left md:hidden",children:[e.jsx(y,{className:"bg-green-500 hover:bg-green-600 py-1.5 px-6 rounded-lg text-white text-center text-sm lg:hidden",to:`/admin/order/${t._id}`,children:"Edit"}),e.jsx("button",{className:"bg-green-200  py-1.5 px-4 mt-2 rounded-lg text-green-600 text-center text-sm lg:hidden",onClick:()=>u(t._id),children:"Delete"})]})]},s))]})]}),r.orders.length===0&&e.jsx("h1",{className:"flex my-10 justify-center w-full text-xl",children:"No Orders Yet"})]})}),e.jsxs("div",{className:"flex w-full justify-center items-center",children:[e.jsx("button",{disabled:!n,className:d("md:py-2 py-1 md:m-2 m-1  px-2 md:px-4 text-sm md:text-base text-gray-700 hover:text-green-600 font-light bg-white shadow-sm rounded-md ",n?"cursor-pointer":"cursor-not-allowed"),onClick:()=>b(0),children:"First"}),e.jsx("button",{className:d("md:py-2 py-1 md:m-2 m-0  px-2 md:px-4 text-sm md:text-base text-gray-700 hover:text-green-600 font-light bg-white shadow-sm rounded-md",n?"cursor-pointer":"cursor-not-allowed"),disabled:!n,onClick:D,children:"Prev"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-700 mx-2",children:[T+1," of ",f]}),e.jsx("button",{className:d("md:py-2 py-1 md:m-2 m-1 px-2 md:px-4 text-sm md:text-base text-gray-700 hover:text-green-600 font-light bg-white shadow-sm rounded-md",o?"cursor-pointer":"cursor-not-allowed"),disabled:!o,onClick:M,children:"Next"}),e.jsx("button",{className:d("md:py-2 py-1 md:m-2 m-0  px-2 md:px-4 text-sm md:text-base text-gray-700 hover:text-green-600 font-light bg-white shadow-sm rounded-md",o?"cursor-pointer":"cursor-not-allowed"),disabled:!o,onClick:()=>b(f-1),children:"Last"})]})]})]})]})};export{K as default};
